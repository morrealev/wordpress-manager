# Report Scheduling

## Report Types

| Report | Frequency | Content | Delivery |
|--------|-----------|---------|----------|
| Daily Digest | Daily (09:00 UTC) | Key metrics, new alerts, resolved alerts | Slack |
| Weekly Performance Summary | Weekly (Monday 09:00 UTC) | CWV trends, traffic delta, uptime %, top errors | Slack |
| Monthly Analytics Report | Monthly (1st, 09:00 UTC) | Full analytics overview, MoM comparisons, recommendations | Slack + Email |
| On-Demand Report | Manual trigger | Any combination of metrics | Slack or Email |

## Daily Digest

### Content

- Site uptime percentage (last 24h)
- Average response time
- New alerts triggered (count by severity)
- Resolved alerts (count)
- CWV snapshot (LCP, CLS, INP averages)
- Plugin updates pending

### Slack Block Kit Template

```json
{
  "blocks": [
    {
      "type": "header",
      "text": { "type": "plain_text", "text": ":newspaper: Daily Digest — example.com" }
    },
    {
      "type": "section",
      "fields": [
        { "type": "mrkdwn", "text": "*Uptime:*\n99.98%" },
        { "type": "mrkdwn", "text": "*Avg Response:*\n420ms" },
        { "type": "mrkdwn", "text": "*Alerts (new):*\n2 warning, 0 critical" },
        { "type": "mrkdwn", "text": "*Alerts (resolved):*\n1" }
      ]
    },
    {
      "type": "section",
      "fields": [
        { "type": "mrkdwn", "text": "*LCP:*\n1.8s :white_check_mark:" },
        { "type": "mrkdwn", "text": "*CLS:*\n0.05 :white_check_mark:" },
        { "type": "mrkdwn", "text": "*INP:*\n150ms :white_check_mark:" },
        { "type": "mrkdwn", "text": "*Updates:*\n3 plugins pending" }
      ]
    },
    {
      "type": "context",
      "elements": [
        { "type": "mrkdwn", "text": "Report period: last 24 hours | Generated by wp-monitoring-agent" }
      ]
    }
  ]
}
```

## Weekly Performance Summary

### Content

- CWV trends (7-day averages vs previous week)
- Traffic summary (sessions, pageviews, bounce rate delta)
- Uptime percentage and incident count
- Top 5 errors by frequency
- Top 5 slowest pages
- Plugin/theme update status

### Slack Block Kit Template

```json
{
  "blocks": [
    {
      "type": "header",
      "text": { "type": "plain_text", "text": ":bar_chart: Weekly Summary — example.com" }
    },
    {
      "type": "section",
      "text": { "type": "mrkdwn", "text": "*Core Web Vitals (7-day avg):*\nLCP: 1.9s (+0.1s) | CLS: 0.04 (-0.01) | INP: 160ms (+10ms)" }
    },
    {
      "type": "section",
      "text": { "type": "mrkdwn", "text": "*Traffic:*\nSessions: 12,450 (+8%) | Pageviews: 34,200 (+5%) | Bounce: 42% (-2%)" }
    },
    {
      "type": "section",
      "text": { "type": "mrkdwn", "text": "*Uptime:*\n99.95% | Incidents: 1 (resolved in 3 min)" }
    },
    {
      "type": "context",
      "elements": [
        { "type": "mrkdwn", "text": "Report period: last 7 days | Generated by wp-monitoring-agent" }
      ]
    }
  ]
}
```

## Monthly Analytics Report

### Content

- Complete CWV analysis with month-over-month comparison
- Traffic analytics (GA4 + Plausible combined)
- Top content by engagement and conversions
- SEO performance (Search Console data if available)
- Error and incident summary
- Resource usage trends (disk, database)
- Recommendations based on trends

### Delivery

- **Slack**: Summary Block Kit message with key highlights
- **Email (SendGrid)**: Full HTML report with charts and tables

## On-Demand Reports

Triggered manually via command. Supports parameters:

- `--period=7d|30d|90d` — report time range
- `--metrics=cwv,traffic,uptime,errors` — select metric groups
- `--format=slack|email|both` — delivery channel
- `--site=site_id` — target site (defaults to all)

## Scheduling Configuration

Reports are scheduled via `WP_SITES_CONFIG`:

```json
{
  "report_schedule": {
    "daily_digest": { "enabled": true, "time": "09:00", "timezone": "UTC", "channel": "#wp-reports" },
    "weekly_summary": { "enabled": true, "day": "monday", "time": "09:00", "timezone": "UTC" },
    "monthly_report": { "enabled": true, "day": 1, "time": "09:00", "email_recipients": ["team@example.com"] }
  }
}
```

Disable any report by setting `"enabled": false`. Adjust `time` and `timezone` as needed.
